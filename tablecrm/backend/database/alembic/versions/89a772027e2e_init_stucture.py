"""Init stucture

Revision ID: 89a772027e2e
Revises:
Create Date: 2024-10-05 15:13:17.768569

"""
from alembic import op
import sqlalchemy as sa

# revision identifiers, used by Alembic.
revision = '89a772027e2e'
down_revision = None
branch_labels = None
depends_on = None


def upgrade() -> None:
    bind = op.get_bind()
    inspector = sa.inspect(bind)
    existing_tables = inspector.get_table_names()

    # ### commands auto generated by Alembic - please adjust! ###
    if 'amo_install_groups' not in existing_tables:
        op.create_table('amo_install_groups',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('referrer', sa.String(), nullable=True),
                        sa.Column('pair_token', sa.String(), nullable=True),
                        sa.Column('setup_custom_fields', sa.Boolean(), server_default='false', nullable=True),
                        sa.PrimaryKeyConstraint('id'),
                        )
        op.create_index(op.f('ix_amo_install_groups_id'), 'amo_install_groups', ['id'], unique=False)
    if 'amo_settings_load_types' not in existing_tables:
        op.create_table('amo_settings_load_types',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('contacts', sa.Boolean(), server_default='false', nullable=True),
                        sa.Column('leads', sa.Boolean(), server_default='false', nullable=True),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_settings_load_types_id'), 'amo_settings_load_types', ['id'], unique=False)
    if 'custom_fields' not in existing_tables:
        op.create_table('custom_fields',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('entity', sa.String(), nullable=True),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('type', sa.String(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_custom_fields_id'), 'custom_fields', ['id'], unique=False)
    if 'docs_sales_settings' not in existing_tables:
        op.create_table('docs_sales_settings',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('repeatability_period',
                                  sa.Enum('minutes', 'hours', 'days', 'weeks', 'months', name='repeatability'),
                                  nullable=False),
                        sa.Column('repeatability_value', sa.Integer(), nullable=False),
                        sa.Column('date_next_created', sa.Integer(), nullable=True),
                        sa.Column('transfer_from_weekends', sa.Boolean(), nullable=True),
                        sa.Column('skip_current_month', sa.Boolean(), nullable=True),
                        sa.Column('repeatability_count', sa.Integer(), nullable=True),
                        sa.Column('default_payment_status', sa.Boolean(), nullable=True),
                        sa.Column('repeatability_tags', sa.Boolean(), nullable=True),
                        sa.Column('repeatability_status', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_docs_sales_settings_id'), 'docs_sales_settings', ['id'], unique=False)
    if 'entity_or_function' not in existing_tables:
        op.create_table('entity_or_function',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=False),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.PrimaryKeyConstraint('id'),
                        sa.UniqueConstraint('name'),

                        )
        op.create_index(op.f('ix_entity_or_function_id'), 'entity_or_function', ['id'], unique=False)
    if 'entity_type' not in existing_tables:

        op.create_table('entity_type',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('code', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_entity_type_id'), 'entity_type', ['id'], unique=False)
    if 'installs' not in existing_tables:
        op.create_table('installs',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('iosversion', sa.String(), nullable=True),
                        sa.Column('phone', sa.String(), nullable=True),
                        sa.Column('devicetoken', sa.String(), nullable=True),
                        sa.Column('md5key', sa.String(), nullable=True),
                        sa.Column('geolocation', sa.String(), nullable=True),
                        sa.Column('push', sa.Boolean(), nullable=True),
                        sa.Column('my_push', sa.String(), nullable=True),
                        sa.Column('foreign_push', sa.String(), nullable=True),
                        sa.Column('contacts', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
                        sa.PrimaryKeyConstraint('id'),
                        sa.UniqueConstraint('devicetoken'),

                        )
        op.create_index(op.f('ix_installs_id'), 'installs', ['id'], unique=False)
    if 'integrations_type' not in existing_tables:

        op.create_table('integrations_type',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_integrations_type_id'), 'integrations_type', ['id'], unique=False)
    if 'jwt_scopes' not in existing_tables:

        op.create_table('jwt_scopes',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('interaction', sa.String(), nullable=False),
                        sa.Column('scope', sa.String(), nullable=False),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_jwt_scopes_id'), 'jwt_scopes', ['id'], unique=False)
    if 'messages' not in existing_tables:

        op.create_table('messages',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('tg_message_id', sa.Integer(), nullable=True),
                        sa.Column('tg_user_or_chat', sa.String(), nullable=True),
                        sa.Column('body', sa.String(), nullable=True),
                        sa.Column('from_or_to', sa.String(), nullable=True),
                        sa.Column('created_at', sa.String(), nullable=True),
                        sa.Column('updated_at', sa.String(), nullable=True),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_messages_id'), 'messages', ['id'], unique=False)
    if 'pay_tariffs' not in existing_tables:

        op.create_table('pay_tariffs',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('price', sa.Float(), nullable=False),
                        sa.Column('per_user', sa.Boolean(), nullable=False),
                        sa.Column('frequency', sa.Integer(), nullable=False),
                        sa.Column('archived', sa.Boolean(), nullable=False),
                        sa.Column('actual', sa.Boolean(), nullable=False),
                        sa.Column('demo_days', sa.Integer(), nullable=False),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.PrimaryKeyConstraint('id'),
                        sa.UniqueConstraint('name'),

                        )
        op.create_index(op.f('ix_pay_tariffs_id'), 'pay_tariffs', ['id'], unique=False)
    if 'tg_accounts' not in existing_tables:

        op.create_table('tg_accounts',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('is_admin', sa.Boolean(), server_default='false', nullable=True),
                        sa.Column('is_blocked', sa.Boolean(), server_default='false', nullable=True),
                        sa.Column('chat_id', sa.String(), nullable=True),
                        sa.Column('owner_id', sa.String(), nullable=True),
                        sa.Column('phone_number', sa.String(), nullable=True),
                        sa.Column('external_id', sa.String(), nullable=True),
                        sa.Column('photo', sa.String(), nullable=True),
                        sa.Column('first_name', sa.String(), nullable=True),
                        sa.Column('last_name', sa.String(), nullable=True),
                        sa.Column('username', sa.String(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.Column('ref_id', sa.String(), nullable=True),
                        sa.PrimaryKeyConstraint('id'),
                        sa.UniqueConstraint('chat_id'),

                        )
        op.create_index(op.f('ix_tg_accounts_id'), 'tg_accounts', ['id'], unique=False)
    if 'type_template' not in existing_tables:

        op.create_table('type_template',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=False),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_type_template_id'), 'type_template', ['id'], unique=False)
    if 'units' not in existing_tables:

        op.create_table('units',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('code', sa.Integer(), nullable=True),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('convent_national_view', sa.String(), nullable=True),
                        sa.Column('convent_international_view', sa.String(), nullable=True),
                        sa.Column('symbol_national_view', sa.String(), nullable=True),
                        sa.Column('symbol_international_view', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_units_id'), 'units', ['id'], unique=False)
    if 'amo_contacts' not in existing_tables:

        op.create_table('amo_contacts',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('phone', sa.String(), nullable=True),
                        sa.Column('amo_install_group_id', sa.Integer(), nullable=True),
                        sa.Column('formatted_phone', sa.String(), nullable=True),
                        sa.Column('ext_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.BigInteger(), nullable=True),
                        sa.Column('updated_at', sa.BigInteger(), nullable=True),
                        sa.ForeignKeyConstraint(['amo_install_group_id'], ['amo_install_groups.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_contacts_amo_install_group_id'), 'amo_contacts', ['amo_install_group_id'],
                        unique=False)
        op.create_index(op.f('ix_amo_contacts_ext_id'), 'amo_contacts', ['ext_id'], unique=False)
        op.create_index(op.f('ix_amo_contacts_id'), 'amo_contacts', ['id'], unique=False)
    if 'amo_lead_pipelines' not in existing_tables:

        op.create_table('amo_lead_pipelines',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('amo_install_group_id', sa.Integer(), nullable=True),
                        sa.Column('amo_id', sa.Integer(), nullable=True),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('sort', sa.Integer(), nullable=True),
                        sa.Column('is_main', sa.Boolean(), nullable=True),
                        sa.Column('is_unsorted_on', sa.Boolean(), nullable=True),
                        sa.Column('is_archive', sa.Boolean(), nullable=True),
                        sa.Column('account_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['amo_install_group_id'], ['amo_install_groups.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_lead_pipelines_id'), 'amo_lead_pipelines', ['id'], unique=False)
    if 'amo_settings' not in existing_tables:

        op.create_table('amo_settings',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('scope', sa.String(), nullable=True),
                        sa.Column('redirect_uri', sa.String(), nullable=True),
                        sa.Column('client_secret', sa.String(), nullable=True),
                        sa.Column('integration_id', sa.String(), nullable=True),
                        sa.Column('load_type_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['load_type_id'], ['amo_settings_load_types.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_settings_id'), 'amo_settings', ['id'], unique=False)
    if 'amo_users' not in existing_tables:

        op.create_table('amo_users',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('email', sa.String(), nullable=True),
                        sa.Column('is_admin', sa.Boolean(), nullable=True),
                        sa.Column('is_active', sa.Boolean(), nullable=True),
                        sa.Column('amo_install_group_id', sa.Integer(), nullable=True),
                        sa.Column('ext_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['amo_install_group_id'], ['amo_install_groups.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_users_id'), 'amo_users', ['id'], unique=False)
    if 'cashboxes' not in existing_tables:

        op.create_table('cashboxes',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('balance', sa.Float(), nullable=True),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('external_id', sa.String(), nullable=True),
                        sa.Column('admin', sa.Integer(), nullable=True),
                        sa.Column('invite_token', sa.String(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['admin'], ['tg_accounts.id'], ),
                        sa.PrimaryKeyConstraint('id'),
                        sa.UniqueConstraint('invite_token'),

                        )
        op.create_index(op.f('ix_cashboxes_id'), 'cashboxes', ['id'], unique=False)
    if 'custom_fields_values' not in existing_tables:

        op.create_table('custom_fields_values',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('cf_id', sa.Integer(), nullable=True),
                        sa.Column('value', sa.String(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['cf_id'], ['custom_fields.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_custom_fields_values_id'), 'custom_fields_values', ['id'], unique=False)
    if 'amo_contacts_double' not in existing_tables:

        op.create_table('amo_contacts_double',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('orig_id', sa.Integer(), nullable=True),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('phone', sa.String(), nullable=True),
                        sa.Column('amo_install_group_id', sa.Integer(), nullable=True),
                        sa.Column('formatted_phone', sa.String(), nullable=True),
                        sa.Column('ext_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.BigInteger(), nullable=True),
                        sa.Column('updated_at', sa.BigInteger(), nullable=True),
                        sa.ForeignKeyConstraint(['amo_install_group_id'], ['amo_install_groups.id'], ),
                        sa.ForeignKeyConstraint(['orig_id'], ['amo_contacts.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_contacts_double_id'), 'amo_contacts_double', ['id'], unique=False)
    if 'amo_custom_fields_comparison' not in existing_tables:

        op.create_table('amo_custom_fields_comparison',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.Column('field_amo_id', sa.BIGINT(), nullable=True),
                        sa.Column('field_detection_name', sa.String(), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_custom_fields_comparison_id'), 'amo_custom_fields_comparison', ['id'], unique=False)
    if 'amo_install' not in existing_tables:

        op.create_table('amo_install',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('code', sa.String(), nullable=True),
                        sa.Column('referrer', sa.String(), nullable=True),
                        sa.Column('platform', sa.Integer(), nullable=True),
                        sa.Column('amo_account_id', sa.Integer(), nullable=True),
                        sa.Column('client_id', sa.String(), nullable=True),
                        sa.Column('client_secret', sa.String(), nullable=True),
                        sa.Column('refresh_token', sa.String(), nullable=True),
                        sa.Column('access_token', sa.String(), nullable=True),
                        sa.Column('expires_in', sa.Integer(), nullable=True),
                        sa.Column('active', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('field_id', sa.Integer(), nullable=True),
                        sa.Column('from_widget', sa.Integer(), nullable=True),
                        sa.Column('is_refresh', sa.Boolean(), server_default='false', nullable=True),
                        sa.Column('install_group_id', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['from_widget'], ['amo_settings.id'], ),
                        sa.ForeignKeyConstraint(['install_group_id'], ['amo_install_groups.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_install_id'), 'amo_install', ['id'], unique=False)
    if 'amo_install_table_cashboxes' not in existing_tables:

        op.create_table('amo_install_table_cashboxes',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.Column('amo_install_group_id', sa.Integer(), nullable=True),
                        sa.Column('last_token', sa.String(), nullable=True),
                        sa.Column('status', sa.Boolean(), nullable=True),
                        sa.Column('additional_info', sa.String(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['amo_install_group_id'], ['amo_install_groups.id'], ),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_install_table_cashboxes_id'), 'amo_install_table_cashboxes', ['id'], unique=False)
    if 'amo_integrations' not in existing_tables:

        op.create_table('amo_integrations',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('type', sa.String(), nullable=True),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_integrations_id'), 'amo_integrations', ['id'], unique=False)
    if 'amo_lead_statuses' not in existing_tables:

        op.create_table('amo_lead_statuses',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('sort', sa.Integer(), nullable=True),
                        sa.Column('is_editable', sa.Boolean(), nullable=True),
                        sa.Column('pipeline_id', sa.Integer(), nullable=True),
                        sa.Column('amo_id', sa.Integer(), nullable=True),
                        sa.Column('color', sa.String(), nullable=True),
                        sa.Column('type', sa.Integer(), nullable=True),
                        sa.Column('account_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['pipeline_id'], ['amo_lead_pipelines.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_lead_statuses_id'), 'amo_lead_statuses', ['id'], unique=False)
    if 'areas' not in existing_tables:

        op.create_table('areas',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('description', sa.String(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_areas_id'), 'areas', ['id'], unique=False)
    if 'articles' not in existing_tables:

        op.create_table('articles',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('icon_file', sa.String(), nullable=True),
                        sa.Column('emoji', sa.String(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('code', sa.Integer(), nullable=True),
                        sa.Column('description', sa.String(), nullable=True),
                        sa.Column('expenses_for', sa.String(), nullable=True),
                        sa.Column('distribute_according', sa.String(), nullable=True),
                        sa.Column('distribute_for', sa.String(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_articles_id'), 'articles', ['id'], unique=False)
    if 'cheques' not in existing_tables:

        op.create_table('cheques',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('user', sa.Integer(), nullable=True),
                        sa.Column('data', sa.JSON(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['user'], ['tg_accounts.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_cheques_id'), 'cheques', ['id'], unique=False)
    if 'contragents' not in existing_tables:

        op.create_table('contragents',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('external_id', sa.String(), nullable=True),
                        sa.Column('phone', sa.String(), nullable=True),
                        sa.Column('inn', sa.String(), nullable=True),
                        sa.Column('description', sa.Text(), nullable=True),
                        sa.Column('contragent_type', sa.Enum('Supplier', 'Buyer', name='contragent_types'), nullable=True),
                        sa.Column('birth_date', sa.Date(), nullable=True),
                        sa.Column('data', sa.JSON(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.Column('email', sa.String(), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_contragents_id'), 'contragents', ['id'], unique=False)
    if 'doc_template' not in existing_tables:

        op.create_table('doc_template',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=False),
                        sa.Column('description', sa.String(), nullable=True),
                        sa.Column('template_data', sa.String(), nullable=True),
                        sa.Column('tags', sa.String(), nullable=True),
                        sa.Column('user_id', sa.Integer(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('type', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['type'], ['type_template.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_doc_template_id'), 'doc_template', ['id'], unique=False)
    if 'entity_to_entity' not in existing_tables:

        op.create_table('entity_to_entity',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('type', sa.String(), nullable=False),
                        sa.Column('cashbox_id', sa.Integer(), nullable=False),
                        sa.Column('from_entity', sa.Integer(), nullable=False),
                        sa.Column('from_id', sa.Integer(), nullable=False),
                        sa.Column('to_entity', sa.Integer(), nullable=False),
                        sa.Column('to_id', sa.Integer(), nullable=False),
                        sa.Column('status', sa.Boolean(), nullable=True),
                        sa.Column('delinked', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['from_entity'], ['entity_or_function.id'], ),
                        sa.ForeignKeyConstraint(['to_entity'], ['entity_or_function.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_entity_to_entity_id'), 'entity_to_entity', ['id'], unique=False)
    if 'events' not in existing_tables:

        op.create_table('events',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('type', sa.String(), nullable=True),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('method', sa.String(), nullable=True),
                        sa.Column('url', sa.String(), nullable=True),
                        sa.Column('payload', sa.JSON(), nullable=True),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.Column('user_id', sa.Integer(), nullable=True),
                        sa.Column('token', sa.String(), nullable=True),
                        sa.Column('ip', sa.String(), nullable=True),
                        sa.Column('status_code', sa.Integer(), nullable=True),
                        sa.Column('request_time', sa.Float(), nullable=True),
                        sa.Column('promoimage', sa.String(), nullable=True),
                        sa.Column('promodata', sa.JSON(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['user_id'], ['tg_accounts.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_events_id'), 'events', ['id'], unique=False)
    if 'links' not in existing_tables:

        op.create_table('links',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('user_id', sa.Integer(), nullable=True),
                        sa.Column('install_id', sa.Integer(), nullable=True),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.Column('tg_token', sa.String(), nullable=True),
                        sa.Column('delinked', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['install_id'], ['installs.id'], ),
                        sa.ForeignKeyConstraint(['user_id'], ['tg_accounts.id'], ),
                        sa.PrimaryKeyConstraint('id'),
                        sa.UniqueConstraint('install_id'),
                        sa.UniqueConstraint('tg_token'),

                        )
        op.create_index(op.f('ix_links_id'), 'links', ['id'], unique=False)
    if 'pages' not in existing_tables:

        op.create_table('pages',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('description', sa.String(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_pages_id'), 'pages', ['id'], unique=False)
    if 'pay_transactions' not in existing_tables:
        op.create_table('pay_transactions',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('tariff', sa.Integer(), nullable=True),
                        sa.Column('users', sa.Integer(), nullable=True),
                        sa.Column('amount', sa.Float(), nullable=True),
                        sa.Column('status', sa.String(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['tariff'], ['pay_tariffs.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_pay_transactions_id'), 'pay_transactions', ['id'], unique=False)
    if 'projects' not in existing_tables:

        op.create_table('projects',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('external_id', sa.String(), nullable=True),
                        sa.Column('incoming', sa.Float(), nullable=True),
                        sa.Column('outgoing', sa.Float(), nullable=True),
                        sa.Column('profitability', sa.Float(), nullable=True),
                        sa.Column('proj_sum', sa.Float(), nullable=True),
                        sa.Column('icon_file', sa.String(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_projects_id'), 'projects', ['id'], unique=False)
    if 'relation_tg_cashboxes' not in existing_tables:

        op.create_table('relation_tg_cashboxes',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.Column('user', sa.Integer(), nullable=True),
                        sa.Column('token', sa.String(), nullable=True),
                        sa.Column('status', sa.Boolean(), nullable=True),
                        sa.Column('is_owner', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['user'], ['tg_accounts.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_relation_tg_cashboxes_id'), 'relation_tg_cashboxes', ['id'], unique=False)
    if 'status_entity_function' not in existing_tables:

        op.create_table('status_entity_function',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('entity_or_function', sa.String(), nullable=False),
                        sa.Column('status', sa.Boolean(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=False),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['entity_or_function'], ['entity_or_function.name'], onupdate='CASCADE',
                                                ondelete='CASCADE'),
                        sa.PrimaryKeyConstraint('id'),
                        sa.UniqueConstraint('entity_or_function', 'cashbox', name='function_cashbox_unique'),

                        )
        op.create_index(op.f('ix_status_entity_function_id'), 'status_entity_function', ['id'], unique=False)
    if 'tag_template' not in existing_tables:

        op.create_table('tag_template',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('name', sa.String(), nullable=False),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_tag_template_id'), 'tag_template', ['id'], unique=False)
    if 'amo_events_type' not in existing_tables:

        op.create_table('amo_events_type',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('event_id', sa.Integer(), nullable=True),
                        sa.Column('type', sa.String(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['event_id'], ['events.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_events_type_id'), 'amo_events_type', ['id'], unique=False)
    if 'amo_leads' not in existing_tables:

        op.create_table('amo_leads',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('amo_install_group_id', sa.Integer(), nullable=True),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('price', sa.BigInteger(), nullable=True),
                        sa.Column('status_id', sa.Integer(), nullable=True),
                        sa.Column('pipeline_id', sa.Integer(), nullable=True),
                        sa.Column('contact_id', sa.Integer(), nullable=True),
                        sa.Column('closed_at', sa.DateTime(timezone=True), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('account_id', sa.BigInteger(), nullable=True),
                        sa.Column('score', sa.BigInteger(), nullable=True),
                        sa.Column('labor_cost', sa.BigInteger(), nullable=True),
                        sa.Column('amo_id', sa.BigInteger(), nullable=True),
                        sa.Column('created_at', sa.BigInteger(), nullable=True),
                        sa.Column('updated_at', sa.BigInteger(), nullable=True),
                        sa.Column('is_edit', sa.Boolean(), server_default='false', nullable=True),
                        sa.ForeignKeyConstraint(['amo_install_group_id'], ['amo_install_groups.id'], ),
                        sa.ForeignKeyConstraint(['pipeline_id'], ['amo_lead_pipelines.id'], ),
                        sa.ForeignKeyConstraint(['status_id'], ['amo_lead_statuses.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_leads_amo_id'), 'amo_leads', ['amo_id'], unique=False)
        op.create_index(op.f('ix_amo_leads_amo_install_group_id'), 'amo_leads', ['amo_install_group_id'], unique=False)
        op.create_index(op.f('ix_amo_leads_id'), 'amo_leads', ['id'], unique=False)
    if 'amo_table_contacts' not in existing_tables:

        op.create_table('amo_table_contacts',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('amo_id', sa.Integer(), nullable=True),
                        sa.Column('table_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.Column('amo_install_group_id', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['amo_id'], ['amo_contacts.id'], ),
                        sa.ForeignKeyConstraint(['amo_install_group_id'], ['amo_install_groups.id'], ),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['table_id'], ['contragents.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_table_contacts_id'), 'amo_table_contacts', ['id'], unique=False)
    if 'categories' not in existing_tables:

        op.create_table('categories',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('external_id', sa.String(), nullable=True),
                        sa.Column('name', sa.String(), nullable=False),
                        sa.Column('description', sa.String(), nullable=True),
                        sa.Column('code', sa.Integer(), nullable=True),
                        sa.Column('parent', sa.Integer(), nullable=True),
                        sa.Column('owner', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('status', sa.Boolean(), nullable=False),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['owner'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['parent'], ['categories.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_categories_id'), 'categories', ['id'], unique=False)
    if 'doc_generated' not in existing_tables:

        op.create_table('doc_generated',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.Column('tags', sa.String(), nullable=True),
                        sa.Column('template_id', sa.Integer(), nullable=True),
                        sa.Column('doc_link', sa.String(), nullable=True),
                        sa.Column('entity', sa.String(), nullable=True),
                        sa.Column('entity_id', sa.Integer(), nullable=True),
                        sa.Column('type_doc', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['template_id'], ['doc_template.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_doc_generated_id'), 'doc_generated', ['id'], unique=False)
    if 'integrations' not in existing_tables:

        op.create_table('integrations',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('status', sa.Boolean(), nullable=False),
                        sa.Column('integrations_type', sa.Integer(), nullable=True),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('description_short', sa.String(), nullable=True),
                        sa.Column('description_long', sa.Text(), nullable=True),
                        sa.Column('folder_name', sa.String(), nullable=True),
                        sa.Column('microservice_id', sa.Integer(), nullable=True),
                        sa.Column('image', sa.String(), nullable=True),
                        sa.Column('images', sa.ARRAY(sa.String()), nullable=True),
                        sa.Column('owner', sa.Integer(), nullable=True),
                        sa.Column('is_public', sa.Boolean(), nullable=True),
                        sa.Column('cost', sa.Integer(), nullable=True),
                        sa.Column('cost_type', sa.String(), nullable=True),
                        sa.Column('cost_percent', sa.Float(), nullable=True),
                        sa.Column('payed_to', sa.Date(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('is_payed', sa.Boolean(), nullable=True),
                        sa.Column('trial', sa.String(), nullable=True),
                        sa.Column('client_app_id', sa.String(), nullable=True),
                        sa.Column('client_secret', sa.String(), nullable=True),
                        sa.Column('code', sa.String(), nullable=True),
                        sa.Column('scopes', sa.Text(), nullable=True),
                        sa.Column('redirect_uri', sa.String(), nullable=True),
                        sa.Column('url', sa.String(), nullable=True),
                        sa.ForeignKeyConstraint(['integrations_type'], ['integrations_type.id'], ),
                        sa.ForeignKeyConstraint(['owner'], ['relation_tg_cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_integrations_id'), 'integrations', ['id'], unique=False)
    if 'manufacturers' not in existing_tables:

        op.create_table('manufacturers',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=False),
                        sa.Column('owner', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['owner'], ['relation_tg_cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_manufacturers_id'), 'manufacturers', ['id'], unique=False)
    if 'organizations' not in existing_tables:

        op.create_table('organizations',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('type', sa.String(), nullable=False),
                        sa.Column('short_name', sa.String(), nullable=False),
                        sa.Column('full_name', sa.String(), nullable=True),
                        sa.Column('work_name', sa.String(), nullable=True),
                        sa.Column('prefix', sa.String(), nullable=True),
                        sa.Column('inn', sa.BigInteger(), nullable=True),
                        sa.Column('kpp', sa.BigInteger(), nullable=True),
                        sa.Column('okved', sa.BigInteger(), nullable=True),
                        sa.Column('okved2', sa.BigInteger(), nullable=True),
                        sa.Column('okpo', sa.BigInteger(), nullable=True),
                        sa.Column('ogrn', sa.BigInteger(), nullable=True),
                        sa.Column('registration_date', sa.Integer(), nullable=True),
                        sa.Column('org_type', sa.String(), nullable=True),
                        sa.Column('tax_type', sa.String(), nullable=True),
                        sa.Column('tax_percent', sa.Float(), nullable=True),
                        sa.Column('owner', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['owner'], ['relation_tg_cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_organizations_id'), 'organizations', ['id'], unique=False)
    if 'pay_accounts_balances' not in existing_tables:

        op.create_table('pay_accounts_balances',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('tariff', sa.Integer(), nullable=False),
                        sa.Column('last_transaction', sa.Integer(), nullable=True),
                        sa.Column('balance', sa.Float(), nullable=True),
                        sa.Column('tariff_type', sa.String(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['last_transaction'], ['pay_transactions.id'], ),
                        sa.ForeignKeyConstraint(['tariff'], ['pay_tariffs.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_pay_accounts_balances_id'), 'pay_accounts_balances', ['id'], unique=False)
    if 'pictures' not in existing_tables:

        op.create_table('pictures',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('entity', sa.String(), nullable=False),
                        sa.Column('entity_id', sa.Integer(), nullable=False),
                        sa.Column('url', sa.String(), nullable=False),
                        sa.Column('size', sa.Integer(), nullable=True),
                        sa.Column('is_main', sa.Boolean(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('owner', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['owner'], ['relation_tg_cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_pictures_id'), 'pictures', ['id'], unique=False)
    if 'price_types' not in existing_tables:

        op.create_table('price_types',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=False),
                        sa.Column('owner', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['owner'], ['relation_tg_cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_price_types_id'), 'price_types', ['id'], unique=False)
    if 'warehouses' not in existing_tables:

        op.create_table('warehouses',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('external_id', sa.String(), nullable=True),
                        sa.Column('name', sa.String(), nullable=False),
                        sa.Column('type', sa.String(), nullable=True),
                        sa.Column('description', sa.String(), nullable=True),
                        sa.Column('address', sa.String(), nullable=True),
                        sa.Column('phone', sa.String(), nullable=True),
                        sa.Column('parent', sa.Integer(), nullable=True),
                        sa.Column('owner', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('status', sa.Boolean(), nullable=False),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['owner'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['parent'], ['warehouses.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_warehouses_id'), 'warehouses', ['id'], unique=False)
    if 'contracts' not in existing_tables:

        op.create_table('contracts',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('number', sa.String(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('print_name', sa.String(), nullable=True),
                        sa.Column('dated', sa.Integer(), nullable=True),
                        sa.Column('used_from', sa.Integer(), nullable=True),
                        sa.Column('used_to', sa.Integer(), nullable=True),
                        sa.Column('status', sa.Boolean(), nullable=False),
                        sa.Column('contragent', sa.Integer(), nullable=True),
                        sa.Column('organization', sa.Integer(), nullable=True),
                        sa.Column('payment_type', sa.String(), nullable=True),
                        sa.Column('payment_time', sa.String(), nullable=True),
                        sa.Column('owner', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['contragent'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['organization'], ['organizations.id'], ),
                        sa.ForeignKeyConstraint(['owner'], ['relation_tg_cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_contracts_id'), 'contracts', ['id'], unique=False)
    if 'distribution_docs' not in existing_tables:

        op.create_table('distribution_docs',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('organization', sa.Integer(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('period_start', sa.Integer(), nullable=False),
                        sa.Column('period_end', sa.Integer(), nullable=False),
                        sa.Column('is_preview', sa.Boolean(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['organization'], ['organizations.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_distribution_docs_id'), 'distribution_docs', ['id'], unique=False)
    if 'fifo_settings' not in existing_tables:

        op.create_table('fifo_settings',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('fully_closed_date', sa.Integer(), nullable=False),
                        sa.Column('temporary_closed_date', sa.Integer(), nullable=True),
                        sa.Column('blocked_date', sa.Integer(), nullable=True),
                        sa.Column('month_closing_delay_days', sa.Integer(), nullable=True),
                        sa.Column('preview_close_period_seconds', sa.Integer(), nullable=False),
                        sa.Column('organization_id', sa.Integer(), nullable=False),
                        sa.Column('in_progress', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
                        sa.PrimaryKeyConstraint('id'),
                        sa.UniqueConstraint('organization_id'),

                        )
        op.create_index(op.f('ix_fifo_settings_id'), 'fifo_settings', ['id'], unique=False)
    if 'gross_profit_docs' not in existing_tables:

        op.create_table('gross_profit_docs',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('organization', sa.Integer(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('period_start', sa.Integer(), nullable=False),
                        sa.Column('period_end', sa.Integer(), nullable=False),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['organization'], ['organizations.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_gross_profit_docs_id'), 'gross_profit_docs', ['id'], unique=False)
    if 'integrations_to_cashbox' not in existing_tables:

        op.create_table('integrations_to_cashbox',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('integration_id', sa.Integer(), nullable=False),
                        sa.Column('installed_by', sa.Integer(), nullable=False),
                        sa.Column('deactivated_by', sa.Integer(), nullable=False),
                        sa.Column('status', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['deactivated_by'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['installed_by'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['integration_id'], ['integrations.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_integrations_to_cashbox_id'), 'integrations_to_cashbox', ['id'], unique=False)
    if 'loyality_cards' not in existing_tables:

        op.create_table('loyality_cards',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('card_number', sa.BigInteger(), nullable=True),
                        sa.Column('tags', sa.String(), nullable=True),
                        sa.Column('balance', sa.Float(), nullable=True),
                        sa.Column('income', sa.Integer(), nullable=True),
                        sa.Column('outcome', sa.Integer(), nullable=True),
                        sa.Column('cashback_percent', sa.Integer(), nullable=True),
                        sa.Column('minimal_checque_amount', sa.Integer(), nullable=True),
                        sa.Column('start_period', sa.DateTime(), nullable=True),
                        sa.Column('end_period', sa.DateTime(), nullable=True),
                        sa.Column('max_percentage', sa.Integer(), nullable=True),
                        sa.Column('max_withdraw_percentage', sa.Integer(), nullable=True),
                        sa.Column('contragent_id', sa.Integer(), nullable=True),
                        sa.Column('organization_id', sa.Integer(), nullable=True),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.Column('created_by_id', sa.Integer(), nullable=True),
                        sa.Column('status_card', sa.Boolean(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('lifetime', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['contragent_id'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['created_by_id'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_loyality_cards_id'), 'loyality_cards', ['id'], unique=False)
        op.create_index(op.f('ix_loyality_cards_lifetime'), 'loyality_cards', ['lifetime'], unique=False)
    if 'loyality_settings' not in existing_tables:

        op.create_table('loyality_settings',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('organization', sa.Integer(), nullable=True),
                        sa.Column('tags', sa.String(), nullable=True),
                        sa.Column('cashback_percent', sa.Integer(), nullable=True),
                        sa.Column('minimal_checque_amount', sa.Integer(), nullable=True),
                        sa.Column('start_period', sa.DateTime(), nullable=True),
                        sa.Column('end_period', sa.DateTime(), nullable=True),
                        sa.Column('max_withdraw_percentage', sa.Integer(), nullable=True),
                        sa.Column('max_percentage', sa.Integer(), nullable=True),
                        sa.Column('lifetime', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['organization'], ['organizations.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_loyality_settings_id'), 'loyality_settings', ['id'], unique=False)
    if 'nomenclature' not in existing_tables:

        op.create_table('nomenclature',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('external_id', sa.String(), nullable=True),
                        sa.Column('name', sa.String(), nullable=False),
                        sa.Column('type', sa.String(), nullable=True),
                        sa.Column('description_short', sa.String(), nullable=True),
                        sa.Column('description_long', sa.String(), nullable=True),
                        sa.Column('cashback_percent', sa.Integer(), nullable=True),
                        sa.Column('code', sa.String(), nullable=True),
                        sa.Column('unit', sa.Integer(), nullable=True),
                        sa.Column('category', sa.Integer(), nullable=True),
                        sa.Column('manufacturer', sa.Integer(), nullable=True),
                        sa.Column('owner', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['category'], ['categories.id'], ),
                        sa.ForeignKeyConstraint(['manufacturer'], ['manufacturers.id'], ),
                        sa.ForeignKeyConstraint(['owner'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['unit'], ['units.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_nomenclature_id'), 'nomenclature', ['id'], unique=False)
    if 'payboxes' not in existing_tables:

        op.create_table('payboxes',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('external_id', sa.String(), nullable=True),
                        sa.Column('start_balance', sa.Float(), nullable=True),
                        sa.Column('balance', sa.Float(), nullable=True),
                        sa.Column('balance_date', sa.Integer(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('update_start_balance', sa.Integer(), nullable=True),
                        sa.Column('update_start_balance_date', sa.Integer(), nullable=True),
                        sa.Column('organization_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_payboxes_id'), 'payboxes', ['id'], unique=False)
    if 'tasks' not in existing_tables:

        op.create_table('tasks',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('description', sa.Text(), nullable=True),
                        sa.Column('report', sa.String(), nullable=True),
                        sa.Column('integration_id', sa.Integer(), nullable=True),
                        sa.Column('status', sa.String(), nullable=True),
                        sa.Column('creator', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['integration_id'], ['integrations.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_tasks_id'), 'tasks', ['id'], unique=False)
    if 'docs_reconciliation' not in existing_tables:

        op.create_table('docs_reconciliation',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('number', sa.String(), nullable=True),
                        sa.Column('dated', sa.Integer(), nullable=True),
                        sa.Column('organization', sa.Integer(), nullable=False),
                        sa.Column('contragent', sa.Integer(), nullable=False),
                        sa.Column('contract', sa.Integer(), nullable=True),
                        sa.Column('organization_name', sa.String(), nullable=True),
                        sa.Column('contragent_name', sa.String(), nullable=True),
                        sa.Column('period_from', sa.Integer(), nullable=True),
                        sa.Column('period_to', sa.Integer(), nullable=True),
                        sa.Column('documents', sa.JSON(), nullable=True),
                        sa.Column('documents_grouped', sa.JSON(), nullable=True),
                        sa.Column('organization_period_debt', sa.Float(), nullable=True),
                        sa.Column('organization_period_credit', sa.Float(), nullable=True),
                        sa.Column('contragent_period_debt', sa.Float(), nullable=True),
                        sa.Column('contragent_period_credit', sa.Float(), nullable=True),
                        sa.Column('organization_initial_balance', sa.Float(), nullable=True),
                        sa.Column('contragent_initial_balance', sa.Float(), nullable=True),
                        sa.Column('organization_closing_balance', sa.Float(), nullable=True),
                        sa.Column('contragent_closing_balance', sa.Float(), nullable=True),
                        sa.Column('created_by', sa.Integer(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['contract'], ['contracts.id'], ),
                        sa.ForeignKeyConstraint(['contragent'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['created_by'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['organization'], ['organizations.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_docs_reconciliation_id'), 'docs_reconciliation', ['id'], unique=False)
    if 'docs_sales' not in existing_tables:

        op.create_table('docs_sales',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('number', sa.String(), nullable=True),
                        sa.Column('dated', sa.Integer(), nullable=True),
                        sa.Column('operation', sa.String(), nullable=True),
                        sa.Column('tags', sa.String(), nullable=True),
                        sa.Column('comment', sa.String(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('contragent', sa.Integer(), nullable=True),
                        sa.Column('contract', sa.Integer(), nullable=True),
                        sa.Column('organization', sa.Integer(), nullable=False),
                        sa.Column('warehouse', sa.Integer(), nullable=True),
                        sa.Column('parent_docs_sales', sa.Integer(), nullable=True),
                        sa.Column('settings', sa.Integer(), nullable=True),
                        sa.Column('autorepeat', sa.Boolean(), nullable=True),
                        sa.Column('status', sa.Boolean(), nullable=True),
                        sa.Column('tax_included', sa.Boolean(), nullable=True),
                        sa.Column('tax_active', sa.Boolean(), nullable=True),
                        sa.Column('sales_manager', sa.Integer(), nullable=True),
                        sa.Column('sum', sa.Float(), nullable=True),
                        sa.Column('created_by', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['contract'], ['contracts.id'], ),
                        sa.ForeignKeyConstraint(['contragent'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['created_by'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['organization'], ['organizations.id'], ),
                        sa.ForeignKeyConstraint(['parent_docs_sales'], ['docs_sales.id'], ),
                        sa.ForeignKeyConstraint(['sales_manager'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['settings'], ['docs_sales_settings.id'], ),
                        sa.ForeignKeyConstraint(['warehouse'], ['warehouses.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_docs_sales_cashbox'), 'docs_sales', ['cashbox'], unique=False)
        op.create_index(op.f('ix_docs_sales_id'), 'docs_sales', ['id'], unique=False)
        op.create_index(op.f('ix_docs_sales_is_deleted'), 'docs_sales', ['is_deleted'], unique=False)
    if 'evotor_credentials' not in existing_tables:

        op.create_table('evotor_credentials',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('integration_cashboxes', sa.Integer(), nullable=True),
                        sa.Column('evotor_token', sa.String(), nullable=True),
                        sa.Column('userId', sa.String(), nullable=True),
                        sa.Column('status', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['integration_cashboxes'], ['integrations_to_cashbox.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_evotor_credentials_id'), 'evotor_credentials', ['id'], unique=False)
    if 'module_bank_credentials' not in existing_tables:

        op.create_table('module_bank_credentials',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('integration_cashboxes', sa.Integer(), nullable=True),
                        sa.Column('access_token', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['integration_cashboxes'], ['integrations_to_cashbox.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_module_bank_credentials_id'), 'module_bank_credentials', ['id'], unique=False)
    if 'nomenclature_barcodes' not in existing_tables:

        op.create_table('nomenclature_barcodes',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('nomenclature_id', sa.Integer(), nullable=True),
                        sa.Column('code', sa.String(), nullable=True),
                        sa.ForeignKeyConstraint(['nomenclature_id'], ['nomenclature.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_nomenclature_barcodes_id'), 'nomenclature_barcodes', ['id'], unique=False)
    if 'prices' not in existing_tables:

        op.create_table('prices',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('price_type', sa.Integer(), nullable=True),
                        sa.Column('price', sa.Float(), nullable=False),
                        sa.Column('nomenclature', sa.Integer(), nullable=False),
                        sa.Column('date_from', sa.Integer(), nullable=True),
                        sa.Column('date_to', sa.Integer(), nullable=True),
                        sa.Column('owner', sa.Integer(), nullable=False),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['nomenclature'], ['nomenclature.id'], ),
                        sa.ForeignKeyConstraint(['owner'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['price_type'], ['price_types.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_prices_id'), 'prices', ['id'], unique=False)
    if 'tochka_bank_credentials' not in existing_tables:

        op.create_table('tochka_bank_credentials',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('integration_cashboxes', sa.Integer(), nullable=True),
                        sa.Column('access_token', sa.String(), nullable=True),
                        sa.Column('refresh_token', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['integration_cashboxes'], ['integrations_to_cashbox.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_tochka_bank_credentials_id'), 'tochka_bank_credentials', ['id'], unique=False)
    if 'amo_leads_docs_sales_mapping' not in existing_tables:

        op.create_table('amo_leads_docs_sales_mapping',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('docs_sales_id', sa.Integer(), nullable=False),
                        sa.Column('lead_id', sa.Integer(), nullable=False),
                        sa.Column('table_status', sa.SmallInteger(), nullable=True),
                        sa.Column('is_sync', sa.Boolean(), nullable=True),
                        sa.Column('amo_install_group_id', sa.Integer(), nullable=True),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['amo_install_group_id'], ['amo_install_groups.id'], ),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['docs_sales_id'], ['docs_sales.id'], ),
                        sa.ForeignKeyConstraint(['lead_id'], ['amo_leads.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_amo_leads_docs_sales_mapping_id'), 'amo_leads_docs_sales_mapping', ['id'], unique=False)
        op.create_index(op.f('ix_amo_leads_docs_sales_mapping_lead_id'), 'amo_leads_docs_sales_mapping', ['lead_id'],
                        unique=False)
    if 'bookikng' not in existing_tables:

        op.create_table('bookikng',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('title', sa.String(), nullable=True),
                        sa.Column('contragent', sa.Integer(), nullable=True),
                        sa.Column('contragent_accept', sa.Integer(), nullable=True),
                        sa.Column('address', sa.String(), nullable=True),
                        sa.Column('date_booking', sa.Integer(), nullable=True),
                        sa.Column('start_booking', sa.Integer(), nullable=True),
                        sa.Column('end_booking', sa.Integer(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('docs_sales_id', sa.Integer(), nullable=True),
                        sa.Column('booking_user_id', sa.Integer(), nullable=True),
                        sa.Column('booking_driver_id', sa.Integer(), nullable=True),
                        sa.Column('status_doc_sales', sa.Enum('partially_paid', 'not_paid', 'paid', name='docsalesstatus'),
                                  nullable=False),
                        sa.Column('status_booking',
                                  sa.Enum('new', 'confirmed', 'paid', 'taken', 'delivered', 'uploaded', 'extended',
                                          'completed', name='bookingstatus'), nullable=False),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('comment', sa.String(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('sale_payload', sa.JSON(), nullable=True),
                        sa.ForeignKeyConstraint(['booking_driver_id'], ['tg_accounts.id'], ),
                        sa.ForeignKeyConstraint(['booking_user_id'], ['tg_accounts.id'], ),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['contragent'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['contragent_accept'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['docs_sales_id'], ['docs_sales.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_bookikng_date_booking'), 'bookikng', ['date_booking'], unique=False)
        op.create_index(op.f('ix_bookikng_end_booking'), 'bookikng', ['end_booking'], unique=False)
        op.create_index(op.f('ix_bookikng_id'), 'bookikng', ['id'], unique=False)
        op.create_index(op.f('ix_bookikng_start_booking'), 'bookikng', ['start_booking'], unique=False)
    if 'docs_purchases' not in existing_tables:

        op.create_table('docs_purchases',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('number', sa.String(), nullable=True),
                        sa.Column('dated', sa.Integer(), nullable=True),
                        sa.Column('operation', sa.String(), nullable=True),
                        sa.Column('tags', sa.String(), nullable=True),
                        sa.Column('comment', sa.String(), nullable=True),
                        sa.Column('status', sa.Boolean(), nullable=True),
                        sa.Column('client', sa.Integer(), nullable=True),
                        sa.Column('contragent', sa.Integer(), nullable=True),
                        sa.Column('contract', sa.Integer(), nullable=True),
                        sa.Column('organization', sa.Integer(), nullable=False),
                        sa.Column('warehouse', sa.Integer(), nullable=True),
                        sa.Column('purchased_by', sa.Integer(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('sum', sa.Float(), nullable=True),
                        sa.Column('created_by', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('docs_sales_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['client'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['contract'], ['contracts.id'], ),
                        sa.ForeignKeyConstraint(['contragent'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['created_by'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['docs_sales_id'], ['docs_sales.id'], ),
                        sa.ForeignKeyConstraint(['organization'], ['organizations.id'], ),
                        sa.ForeignKeyConstraint(['purchased_by'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['warehouse'], ['warehouses.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_docs_purchases_id'), 'docs_purchases', ['id'], unique=False)
    if 'docs_sales_goods' not in existing_tables:
        op.create_table('docs_sales_goods',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('docs_sales_id', sa.Integer(), nullable=False),
                        sa.Column('nomenclature', sa.Integer(), nullable=False),
                        sa.Column('price_type', sa.Integer(), nullable=True),
                        sa.Column('price', sa.Float(), nullable=False),
                        sa.Column('quantity', sa.Float(), nullable=False),
                        sa.Column('unit', sa.Integer(), nullable=True),
                        sa.Column('tax', sa.Float(), nullable=True),
                        sa.Column('discount', sa.Float(), nullable=True),
                        sa.Column('sum_discounted', sa.Float(), nullable=True),
                        sa.Column('status', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['docs_sales_id'], ['docs_sales.id'], ),
                        sa.ForeignKeyConstraint(['nomenclature'], ['nomenclature.id'], ),
                        sa.ForeignKeyConstraint(['price_type'], ['price_types.id'], ),
                        sa.ForeignKeyConstraint(['unit'], ['units.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_docs_sales_goods_id'), 'docs_sales_goods', ['id'], unique=False)
    if 'docs_sales_tags' not in existing_tables:

        op.create_table('docs_sales_tags',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('docs_sales_id', sa.Integer(), nullable=False),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.ForeignKeyConstraint(['docs_sales_id'], ['docs_sales.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_docs_sales_tags_id'), 'docs_sales_tags', ['id'], unique=False)
        op.create_index(op.f('ix_docs_sales_tags_name'), 'docs_sales_tags', ['name'], unique=False)
    if 'gross_profit_docs_operations' not in existing_tables:

        op.create_table('gross_profit_docs_operations',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('gross_profit_doc_id', sa.Integer(), nullable=False),
                        sa.Column('document_sale', sa.Integer(), nullable=False),
                        sa.Column('net_cost', sa.Float(), nullable=False),
                        sa.Column('sum', sa.Float(), nullable=False),
                        sa.Column('actual_revenue', sa.Float(), nullable=False),
                        sa.Column('direct_costs', sa.Float(), nullable=False),
                        sa.Column('indirect_costs', sa.Float(), nullable=False),
                        sa.Column('gross_profit', sa.Float(), nullable=False),
                        sa.Column('rentability', sa.Float(), nullable=False),
                        sa.Column('sales_manager', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['document_sale'], ['docs_sales.id'], ),
                        sa.ForeignKeyConstraint(['gross_profit_doc_id'], ['gross_profit_docs.id'], ondelete='CASCADE'),
                        sa.ForeignKeyConstraint(['sales_manager'], ['relation_tg_cashboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_gross_profit_docs_operations_id'), 'gross_profit_docs_operations', ['id'], unique=False)
    if 'loyality_transactions' not in existing_tables:

        op.create_table('loyality_transactions',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('type', sa.String(), nullable=True),
                        sa.Column('dated', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('amount', sa.Float(), nullable=True),
                        sa.Column('loyality_card_id', sa.Integer(), nullable=True),
                        sa.Column('loyality_card_number', sa.BigInteger(), nullable=True),
                        sa.Column('created_by_id', sa.Integer(), nullable=True),
                        sa.Column('card_balance', sa.Float(), nullable=True),
                        sa.Column('docs_sales_id', sa.Integer(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('tags', sa.String(), nullable=True),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('description', sa.String(), nullable=True),
                        sa.Column('status', sa.Boolean(), nullable=True),
                        sa.Column('external_id', sa.String(), nullable=True),
                        sa.Column('cashier_name', sa.String(), nullable=True),
                        sa.Column('dead_at', sa.DateTime(), nullable=True),
                        sa.Column('autoburned', sa.Boolean(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['created_by_id'], ['relation_tg_cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['docs_sales_id'], ['docs_sales.id'], ),
                        sa.ForeignKeyConstraint(['loyality_card_id'], ['loyality_cards.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_loyality_transactions_autoburned'), 'loyality_transactions', ['autoburned'], unique=False)
        op.create_index(op.f('ix_loyality_transactions_id'), 'loyality_transactions', ['id'], unique=False)
        op.create_index(op.f('ix_loyality_transactions_loyality_card_id'), 'loyality_transactions', ['loyality_card_id'],
                        unique=False)
    if 'module_bank_accounts' not in existing_tables:

        op.create_table('module_bank_accounts',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('payboxes_id', sa.Integer(), nullable=True),
                        sa.Column('module_bank_credential_id', sa.Integer(), nullable=True),
                        sa.Column('accountName', sa.String(), nullable=True),
                        sa.Column('bankBic', sa.String(), nullable=True),
                        sa.Column('bankInn', sa.String(), nullable=True),
                        sa.Column('bankKpp', sa.String(), nullable=True),
                        sa.Column('bankCorrespondentAccount', sa.String(), nullable=True),
                        sa.Column('bankName', sa.String(), nullable=True),
                        sa.Column('beginDate', sa.String(), nullable=True),
                        sa.Column('category', sa.String(), nullable=True),
                        sa.Column('currency', sa.String(), nullable=True),
                        sa.Column('accountId', sa.String(), nullable=False),
                        sa.Column('number', sa.String(), nullable=True),
                        sa.Column('status', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('is_active', sa.Boolean(), nullable=True),
                        sa.ForeignKeyConstraint(['module_bank_credential_id'], ['module_bank_credentials.id'], ),
                        sa.ForeignKeyConstraint(['payboxes_id'], ['payboxes.id'], ),
                        sa.PrimaryKeyConstraint('id'),
                        sa.UniqueConstraint('accountId'),

                        )
        op.create_index(op.f('ix_module_bank_accounts_id'), 'module_bank_accounts', ['id'], unique=False)
        op.create_index(op.f('ix_module_bank_accounts_module_bank_credential_id'), 'module_bank_accounts',
                        ['module_bank_credential_id'], unique=False)
        op.create_index(op.f('ix_module_bank_accounts_payboxes_id'), 'module_bank_accounts', ['payboxes_id'], unique=False)
    if 'payments' not in existing_tables:

        op.create_table('payments',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('type', sa.String(), nullable=True),
                        sa.Column('name', sa.String(), nullable=True),
                        sa.Column('external_id', sa.String(), nullable=True),
                        sa.Column('article', sa.String(), nullable=True),
                        sa.Column('project_id', sa.Integer(), nullable=True),
                        sa.Column('article_id', sa.Integer(), nullable=True),
                        sa.Column('tags', sa.String(), nullable=True),
                        sa.Column('amount', sa.Float(), nullable=True),
                        sa.Column('amount_without_tax', sa.Float(), nullable=True),
                        sa.Column('description', sa.Text(), nullable=True),
                        sa.Column('date', sa.Integer(), nullable=True),
                        sa.Column('repeat_freq', sa.Integer(), nullable=True),
                        sa.Column('parent_id', sa.Integer(), nullable=True),
                        sa.Column('repeat_parent_id', sa.Integer(), nullable=True),
                        sa.Column('repeat_period', sa.String(), nullable=True),
                        sa.Column('repeat_first', sa.Integer(), nullable=True),
                        sa.Column('repeat_last', sa.Integer(), nullable=True),
                        sa.Column('repeat_number', sa.Integer(), nullable=True),
                        sa.Column('repeat_day', sa.Integer(), nullable=True),
                        sa.Column('repeat_month', sa.Integer(), nullable=True),
                        sa.Column('repeat_seconds', sa.Integer(), nullable=True),
                        sa.Column('repeat_weekday', sa.String(), nullable=True),
                        sa.Column('stopped', sa.Boolean(), nullable=True),
                        sa.Column('status', sa.Boolean(), nullable=True),
                        sa.Column('tax', sa.Float(), nullable=True),
                        sa.Column('tax_type', sa.String(), nullable=True),
                        sa.Column('deb_cred', sa.Boolean(), nullable=True),
                        sa.Column('raspilen', sa.Boolean(), nullable=True),
                        sa.Column('contragent', sa.Integer(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('paybox', sa.Integer(), nullable=True),
                        sa.Column('paybox_to', sa.Integer(), nullable=True),
                        sa.Column('account', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('cheque', sa.Integer(), nullable=True),
                        sa.Column('docs_sales_id', sa.Integer(), nullable=True),
                        sa.Column('contract_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.Integer(), nullable=True),
                        sa.Column('updated_at', sa.Integer(), nullable=True),
                        sa.ForeignKeyConstraint(['account'], ['tg_accounts.id'], ),
                        sa.ForeignKeyConstraint(['article_id'], ['articles.id'], ),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['cheque'], ['cheques.id'], ),
                        sa.ForeignKeyConstraint(['contract_id'], ['contracts.id'], ),
                        sa.ForeignKeyConstraint(['contragent'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['docs_sales_id'], ['docs_sales.id'], ),
                        sa.ForeignKeyConstraint(['paybox'], ['payboxes.id'], ),
                        sa.ForeignKeyConstraint(['paybox_to'], ['payboxes.id'], ),
                        sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ),
                        sa.ForeignKeyConstraint(['repeat_parent_id'], ['payments.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_payments_cashbox'), 'payments', ['cashbox'], unique=False)
        op.create_index(op.f('ix_payments_id'), 'payments', ['id'], unique=False)
        op.create_index(op.f('ix_payments_paybox'), 'payments', ['paybox'], unique=False)
    if 'tochka_bank_accounts' not in existing_tables:

        op.create_table('tochka_bank_accounts',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('payboxes_id', sa.Integer(), nullable=True),
                        sa.Column('tochka_bank_credential_id', sa.Integer(), nullable=True),
                        sa.Column('customerCode', sa.String(), nullable=True),
                        sa.Column('accountId', sa.String(), nullable=False),
                        sa.Column('transitAccount', sa.String(), nullable=True),
                        sa.Column('status', sa.String(), nullable=True),
                        sa.Column('statusUpdateDateTime', sa.String(), nullable=True),
                        sa.Column('currency', sa.String(), nullable=True),
                        sa.Column('accountType', sa.String(), nullable=True),
                        sa.Column('accountSubType', sa.String(), nullable=True),
                        sa.Column('registrationDate', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('is_active', sa.Boolean(), nullable=True),
                        sa.ForeignKeyConstraint(['payboxes_id'], ['payboxes.id'], ),
                        sa.ForeignKeyConstraint(['tochka_bank_credential_id'], ['tochka_bank_credentials.id'], ),
                        sa.PrimaryKeyConstraint('id'),
                        sa.UniqueConstraint('accountId'),

                        )
        op.create_index(op.f('ix_tochka_bank_accounts_id'), 'tochka_bank_accounts', ['id'], unique=False)
        op.create_index(op.f('ix_tochka_bank_accounts_payboxes_id'), 'tochka_bank_accounts', ['payboxes_id'], unique=False)
        op.create_index(op.f('ix_tochka_bank_accounts_tochka_bank_credential_id'), 'tochka_bank_accounts',
                        ['tochka_bank_credential_id'], unique=False)
    if 'booking_nomenclature' not in existing_tables:

        op.create_table('booking_nomenclature',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('booking_id', sa.Integer(), nullable=True),
                        sa.Column('nomenclature_id', sa.Integer(), nullable=True),
                        sa.Column('tariff', sa.Enum('month', 'day', 'week', name='tariff'), nullable=False),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.ForeignKeyConstraint(['booking_id'], ['bookikng.id'], ),
                        sa.ForeignKeyConstraint(['nomenclature_id'], ['nomenclature.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_booking_nomenclature_id'), 'booking_nomenclature', ['id'], unique=False)
    if 'docs_purchases_goods' not in existing_tables:

        op.create_table('docs_purchases_goods',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('docs_purchases_id', sa.Integer(), nullable=False),
                        sa.Column('nomenclature', sa.Integer(), nullable=False),
                        sa.Column('price_type', sa.Integer(), nullable=True),
                        sa.Column('price', sa.Float(), nullable=False),
                        sa.Column('quantity', sa.Float(), nullable=False),
                        sa.Column('unit', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['docs_purchases_id'], ['docs_purchases.id'], ),
                        sa.ForeignKeyConstraint(['nomenclature'], ['nomenclature.id'], ),
                        sa.ForeignKeyConstraint(['price_type'], ['price_types.id'], ),
                        sa.ForeignKeyConstraint(['unit'], ['units.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_docs_purchases_goods_id'), 'docs_purchases_goods', ['id'], unique=False)
    if 'docs_warehouse' not in existing_tables:

        op.create_table('docs_warehouse',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('number', sa.String(), nullable=True),
                        sa.Column('tags', sa.String(), nullable=True),
                        sa.Column('dated', sa.Integer(), nullable=True),
                        sa.Column('operation', sa.String(), nullable=True),
                        sa.Column('comment', sa.String(), nullable=True),
                        sa.Column('status', sa.Boolean(), nullable=True),
                        sa.Column('cashbox', sa.Integer(), nullable=True),
                        sa.Column('contract', sa.Integer(), nullable=True),
                        sa.Column('contragent', sa.Integer(), nullable=True),
                        sa.Column('docs_purchases', sa.Integer(), nullable=True),
                        sa.Column('organization', sa.Integer(), nullable=False),
                        sa.Column('docs_sales_id', sa.Integer(), nullable=True),
                        sa.Column('warehouse', sa.Integer(), nullable=True),
                        sa.Column('to_warehouse', sa.Integer(), nullable=True),
                        sa.Column('sum', sa.Float(), nullable=True),
                        sa.Column('created_by', sa.Integer(), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['contract'], ['contracts.id'], ),
                        sa.ForeignKeyConstraint(['contragent'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['created_by'], ['tg_accounts.id'], ),
                        sa.ForeignKeyConstraint(['docs_purchases'], ['docs_purchases.id'], ),
                        sa.ForeignKeyConstraint(['docs_sales_id'], ['docs_sales.id'], ),
                        sa.ForeignKeyConstraint(['organization'], ['organizations.id'], ),
                        sa.ForeignKeyConstraint(['to_warehouse'], ['warehouses.id'], ),
                        sa.ForeignKeyConstraint(['warehouse'], ['warehouses.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_docs_warehouse_id'), 'docs_warehouse', ['id'], unique=False)
    if 'module_bank_operations' not in existing_tables:

        op.create_table('module_bank_operations',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('accountId', sa.String(), nullable=True),
                        sa.Column('payment_crm_id', sa.Integer(), nullable=True),
                        sa.Column('contragent_crm_id', sa.Integer(), nullable=True),
                        sa.Column('operationId', sa.String(), nullable=True),
                        sa.Column('cardId', sa.String(), nullable=True),
                        sa.Column('companyId', sa.String(), nullable=True),
                        sa.Column('status', sa.String(), nullable=True),
                        sa.Column('category', sa.String(), nullable=True),
                        sa.Column('contragentName', sa.String(), nullable=True),
                        sa.Column('contragentInn', sa.String(), nullable=True),
                        sa.Column('contragentKpp', sa.String(), nullable=True),
                        sa.Column('contragentBankAccountNumber', sa.String(), nullable=True),
                        sa.Column('contragentBankName', sa.String(), nullable=True),
                        sa.Column('contragentBankBic', sa.String(), nullable=True),
                        sa.Column('amount', sa.Float(), nullable=True),
                        sa.Column('bankAccountNumber', sa.String(), nullable=True),
                        sa.Column('paymentPurpose', sa.String(), nullable=True),
                        sa.Column('executed', sa.String(), nullable=True),
                        sa.Column('created', sa.String(), nullable=True),
                        sa.Column('absId', sa.String(), nullable=True),
                        sa.Column('ibsoId', sa.String(), nullable=True),
                        sa.Column('kbk', sa.String(), nullable=True),
                        sa.Column('oktmo', sa.String(), nullable=True),
                        sa.Column('paymentBasis', sa.String(), nullable=True),
                        sa.Column('taxCode', sa.String(), nullable=True),
                        sa.Column('taxDocNum', sa.String(), nullable=True),
                        sa.Column('taxDocDate', sa.String(), nullable=True),
                        sa.Column('payerStatus', sa.String(), nullable=True),
                        sa.Column('uin', sa.String(), nullable=True),
                        sa.Column('currency', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['contragent_crm_id'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['payment_crm_id'], ['payments.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_module_bank_operations_id'), 'module_bank_operations', ['id'], unique=False)
        op.create_index(op.f('ix_module_bank_operations_payment_crm_id'), 'module_bank_operations', ['payment_crm_id'],
                        unique=False)
    if 'tochka_bank_payments' not in existing_tables:

        op.create_table('tochka_bank_payments',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('accountId', sa.String(), nullable=True),
                        sa.Column('payment_crm_id', sa.Integer(), nullable=True),
                        sa.Column('contragent_crm_id', sa.Integer(), nullable=True),
                        sa.Column('statementId', sa.String(), nullable=True),
                        sa.Column('statement_creation_datetime', sa.String(), nullable=True),
                        sa.Column('transactionTypeCode', sa.String(), nullable=True),
                        sa.Column('transactionId', sa.String(), nullable=True),
                        sa.Column('status', sa.String(), nullable=True),
                        sa.Column('payment_id', sa.String(), nullable=True),
                        sa.Column('documentProcessDate', sa.String(), nullable=True),
                        sa.Column('documentNumber', sa.String(), nullable=True),
                        sa.Column('description', sa.String(), nullable=True),
                        sa.Column('creditDebitIndicator', sa.String(), nullable=True),
                        sa.Column('amount', sa.Float(), nullable=True),
                        sa.Column('amountNat', sa.Float(), nullable=True),
                        sa.Column('currency', sa.String(), nullable=True),
                        sa.Column('creditor_party_inn', sa.String(), nullable=True),
                        sa.Column('creditor_party_name', sa.String(), nullable=True),
                        sa.Column('creditor_party_kpp', sa.String(), nullable=True),
                        sa.Column('creditor_account_identification', sa.String(), nullable=True),
                        sa.Column('creditor_account_schemeName', sa.String(), nullable=True),
                        sa.Column('creditor_agent_schemeName', sa.String(), nullable=True),
                        sa.Column('creditor_agent_name', sa.String(), nullable=True),
                        sa.Column('creditor_agent_identification', sa.String(), nullable=True),
                        sa.Column('creditor_agent_accountIdentification', sa.String(), nullable=True),
                        sa.Column('debitor_party_inn', sa.String(), nullable=True),
                        sa.Column('debitor_party_name', sa.String(), nullable=True),
                        sa.Column('debitor_party_kpp', sa.String(), nullable=True),
                        sa.Column('debitor_account_identification', sa.String(), nullable=True),
                        sa.Column('debitor_account_schemeName', sa.String(), nullable=True),
                        sa.Column('debitor_agent_schemeName', sa.String(), nullable=True),
                        sa.Column('debitor_agent_name', sa.String(), nullable=True),
                        sa.Column('debitor_agent_identification', sa.String(), nullable=True),
                        sa.Column('debitor_agent_accountIdentification', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['contragent_crm_id'], ['contragents.id'], ),
                        sa.ForeignKeyConstraint(['payment_crm_id'], ['payments.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_tochka_bank_payments_id'), 'tochka_bank_payments', ['id'], unique=False)
        op.create_index(op.f('ix_tochka_bank_payments_payment_crm_id'), 'tochka_bank_payments', ['payment_crm_id'],
                        unique=False)
        op.create_index(op.f('ix_tochka_bank_payments_payment_id'), 'tochka_bank_payments', ['payment_id'], unique=False)
    if 'booking_events' not in existing_tables:

        op.create_table('booking_events',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('booking_nomenclature_id', sa.Integer(), nullable=True),
                        sa.Column('type', sa.Enum('give', 'take', name='bookingeventstatus'), nullable=False),
                        sa.Column('value', sa.String(), nullable=True),
                        sa.Column('latitude', sa.String(), nullable=True),
                        sa.Column('longitude', sa.String(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('is_deleted', sa.Boolean(), nullable=True),
                        sa.ForeignKeyConstraint(['booking_nomenclature_id'], ['booking_nomenclature.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_booking_events_id'), 'booking_events', ['id'], unique=False)
        op.create_index(op.f('ix_booking_events_type'), 'booking_events', ['type'], unique=False)
    if 'distribution_fifo_operations' not in existing_tables:

        op.create_table('distribution_fifo_operations',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('distribution_fifo', sa.Integer(), nullable=True),
                        sa.Column('document_sale', sa.Integer(), nullable=True),
                        sa.Column('document_purchase', sa.Integer(), nullable=True),
                        sa.Column('document_warehouse', sa.Integer(), nullable=True),
                        sa.Column('nomenclature', sa.Integer(), nullable=True),
                        sa.Column('dated', sa.Integer(), nullable=False),
                        sa.Column('start_amount', sa.Integer(), nullable=False),
                        sa.Column('start_price', sa.Float(), nullable=False),
                        sa.Column('incoming_amount', sa.Integer(), nullable=True),
                        sa.Column('incoming_price', sa.Float(), nullable=True),
                        sa.Column('outgoing_amount', sa.Integer(), nullable=True),
                        sa.Column('outgoing_price', sa.Float(), nullable=True),
                        sa.Column('end_amount', sa.Integer(), nullable=False),
                        sa.Column('end_price', sa.Float(), nullable=False),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['distribution_fifo'], ['distribution_docs.id'], ondelete='CASCADE'),
                        sa.ForeignKeyConstraint(['document_purchase'], ['docs_purchases.id'], ),
                        sa.ForeignKeyConstraint(['document_sale'], ['docs_sales.id'], ),
                        sa.ForeignKeyConstraint(['document_warehouse'], ['docs_warehouse.id'], ),
                        sa.ForeignKeyConstraint(['nomenclature'], ['nomenclature.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_distribution_fifo_operations_id'), 'distribution_fifo_operations', ['id'], unique=False)
    if 'docs_warehouse_goods' not in existing_tables:

        op.create_table('docs_warehouse_goods',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('docs_warehouse_id', sa.Integer(), nullable=False),
                        sa.Column('nomenclature', sa.Integer(), nullable=False),
                        sa.Column('price_type', sa.Integer(), nullable=True),
                        sa.Column('price', sa.Float(), nullable=False),
                        sa.Column('quantity', sa.Float(), nullable=False),
                        sa.Column('unit', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['docs_warehouse_id'], ['docs_warehouse.id'], ),
                        sa.ForeignKeyConstraint(['nomenclature'], ['nomenclature.id'], ),
                        sa.ForeignKeyConstraint(['price_type'], ['price_types.id'], ),
                        sa.ForeignKeyConstraint(['unit'], ['units.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_docs_warehouse_goods_id'), 'docs_warehouse_goods', ['id'], unique=False)
    if 'warehouse_balances' not in existing_tables:

        op.create_table('warehouse_balances',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('organization_id', sa.Integer(), nullable=True),
                        sa.Column('warehouse_id', sa.Integer(), nullable=True),
                        sa.Column('nomenclature_id', sa.Integer(), nullable=True),
                        sa.Column('document_sale_id', sa.Integer(), nullable=True),
                        sa.Column('document_purchase_id', sa.Integer(), nullable=True),
                        sa.Column('document_warehouse_id', sa.Integer(), nullable=True),
                        sa.Column('incoming_amount', sa.Integer(), nullable=True),
                        sa.Column('outgoing_amount', sa.Integer(), nullable=True),
                        sa.Column('current_amount', sa.Integer(), nullable=False),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['document_purchase_id'], ['docs_purchases.id'], ),
                        sa.ForeignKeyConstraint(['document_sale_id'], ['docs_sales.id'], ),
                        sa.ForeignKeyConstraint(['document_warehouse_id'], ['docs_warehouse.id'], ),
                        sa.ForeignKeyConstraint(['nomenclature_id'], ['nomenclature.id'], ),
                        sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
                        sa.ForeignKeyConstraint(['warehouse_id'], ['warehouses.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_warehouse_balances_id'), 'warehouse_balances', ['id'], unique=False)
    if 'warehouse_register_movement' not in existing_tables:

        op.create_table('warehouse_register_movement',
                        sa.Column('id', sa.Integer(), nullable=False),
                        sa.Column('type_amount', sa.Enum('plus', 'minus', name='operationtype'), nullable=True),
                        sa.Column('organization_id', sa.Integer(), nullable=True),
                        sa.Column('warehouse_id', sa.Integer(), nullable=True),
                        sa.Column('nomenclature_id', sa.Integer(), nullable=True),
                        sa.Column('document_sale_id', sa.Integer(), nullable=True),
                        sa.Column('document_purchase_id', sa.Integer(), nullable=True),
                        sa.Column('document_warehouse_id', sa.Integer(), nullable=True),
                        sa.Column('amount', sa.Float(), nullable=False),
                        sa.Column('cashbox_id', sa.Integer(), nullable=True),
                        sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.Column('updated_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
                        sa.ForeignKeyConstraint(['cashbox_id'], ['cashboxes.id'], ),
                        sa.ForeignKeyConstraint(['document_purchase_id'], ['docs_purchases.id'], ),
                        sa.ForeignKeyConstraint(['document_sale_id'], ['docs_sales.id'], ),
                        sa.ForeignKeyConstraint(['document_warehouse_id'], ['docs_warehouse.id'], ),
                        sa.ForeignKeyConstraint(['nomenclature_id'], ['nomenclature.id'], ),
                        sa.ForeignKeyConstraint(['organization_id'], ['organizations.id'], ),
                        sa.ForeignKeyConstraint(['warehouse_id'], ['warehouses.id'], ),
                        sa.PrimaryKeyConstraint('id'),

                        )
        op.create_index(op.f('ix_warehouse_register_movement_id'), 'warehouse_register_movement', ['id'], unique=False)
    if 'booking_events_photo' not in existing_tables:

        op.create_table('booking_events_photo',
                        sa.Column('id', sa.Integer(), nullable=True),
                        sa.Column('booking_event_id', sa.Integer(), nullable=False),
                        sa.Column('photo_id', sa.Integer(), nullable=False),
                        sa.ForeignKeyConstraint(['booking_event_id'], ['booking_events.id'], ),
                        sa.ForeignKeyConstraint(['photo_id'], ['pictures.id'], ),
                        sa.PrimaryKeyConstraint('booking_event_id', 'photo_id'),

                        )
        op.create_index(op.f('ix_booking_events_photo_id'), 'booking_events_photo', ['id'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_booking_events_photo_id'), table_name='booking_events_photo')
    op.drop_table('booking_events_photo')
    op.drop_index(op.f('ix_warehouse_register_movement_id'), table_name='warehouse_register_movement')
    op.drop_table('warehouse_register_movement')
    op.drop_index(op.f('ix_warehouse_balances_id'), table_name='warehouse_balances')
    op.drop_table('warehouse_balances')
    op.drop_index(op.f('ix_docs_warehouse_goods_id'), table_name='docs_warehouse_goods')
    op.drop_table('docs_warehouse_goods')
    op.drop_index(op.f('ix_distribution_fifo_operations_id'), table_name='distribution_fifo_operations')
    op.drop_table('distribution_fifo_operations')
    op.drop_index(op.f('ix_booking_events_type'), table_name='booking_events')
    op.drop_index(op.f('ix_booking_events_id'), table_name='booking_events')
    op.drop_table('booking_events')
    op.drop_index(op.f('ix_tochka_bank_payments_payment_id'), table_name='tochka_bank_payments')
    op.drop_index(op.f('ix_tochka_bank_payments_payment_crm_id'), table_name='tochka_bank_payments')
    op.drop_index(op.f('ix_tochka_bank_payments_id'), table_name='tochka_bank_payments')
    op.drop_table('tochka_bank_payments')
    op.drop_index(op.f('ix_module_bank_operations_payment_crm_id'), table_name='module_bank_operations')
    op.drop_index(op.f('ix_module_bank_operations_id'), table_name='module_bank_operations')
    op.drop_table('module_bank_operations')
    op.drop_index(op.f('ix_docs_warehouse_id'), table_name='docs_warehouse')
    op.drop_table('docs_warehouse')
    op.drop_index(op.f('ix_docs_purchases_goods_id'), table_name='docs_purchases_goods')
    op.drop_table('docs_purchases_goods')
    op.drop_index(op.f('ix_booking_nomenclature_id'), table_name='booking_nomenclature')
    op.drop_table('booking_nomenclature')
    op.drop_index(op.f('ix_tochka_bank_accounts_tochka_bank_credential_id'), table_name='tochka_bank_accounts')
    op.drop_index(op.f('ix_tochka_bank_accounts_payboxes_id'), table_name='tochka_bank_accounts')
    op.drop_index(op.f('ix_tochka_bank_accounts_id'), table_name='tochka_bank_accounts')
    op.drop_table('tochka_bank_accounts')
    op.drop_index(op.f('ix_payments_paybox'), table_name='payments')
    op.drop_index(op.f('ix_payments_id'), table_name='payments')
    op.drop_index(op.f('ix_payments_cashbox'), table_name='payments')
    op.drop_table('payments')
    op.drop_index(op.f('ix_module_bank_accounts_payboxes_id'), table_name='module_bank_accounts')
    op.drop_index(op.f('ix_module_bank_accounts_module_bank_credential_id'), table_name='module_bank_accounts')
    op.drop_index(op.f('ix_module_bank_accounts_id'), table_name='module_bank_accounts')
    op.drop_table('module_bank_accounts')
    op.drop_index(op.f('ix_loyality_transactions_loyality_card_id'), table_name='loyality_transactions')
    op.drop_index(op.f('ix_loyality_transactions_id'), table_name='loyality_transactions')
    op.drop_index(op.f('ix_loyality_transactions_autoburned'), table_name='loyality_transactions')
    op.drop_table('loyality_transactions')
    op.drop_index(op.f('ix_gross_profit_docs_operations_id'), table_name='gross_profit_docs_operations')
    op.drop_table('gross_profit_docs_operations')
    op.drop_index(op.f('ix_docs_sales_tags_name'), table_name='docs_sales_tags')
    op.drop_index(op.f('ix_docs_sales_tags_id'), table_name='docs_sales_tags')
    op.drop_table('docs_sales_tags')
    op.drop_index(op.f('ix_docs_sales_goods_id'), table_name='docs_sales_goods')
    op.drop_table('docs_sales_goods')
    op.drop_index(op.f('ix_docs_purchases_id'), table_name='docs_purchases')
    op.drop_table('docs_purchases')
    op.drop_index(op.f('ix_bookikng_start_booking'), table_name='bookikng')
    op.drop_index(op.f('ix_bookikng_id'), table_name='bookikng')
    op.drop_index(op.f('ix_bookikng_end_booking'), table_name='bookikng')
    op.drop_index(op.f('ix_bookikng_date_booking'), table_name='bookikng')
    op.drop_table('bookikng')
    op.drop_index(op.f('ix_amo_leads_docs_sales_mapping_lead_id'), table_name='amo_leads_docs_sales_mapping')
    op.drop_index(op.f('ix_amo_leads_docs_sales_mapping_id'), table_name='amo_leads_docs_sales_mapping')
    op.drop_table('amo_leads_docs_sales_mapping')
    op.drop_index(op.f('ix_tochka_bank_credentials_id'), table_name='tochka_bank_credentials')
    op.drop_table('tochka_bank_credentials')
    op.drop_index(op.f('ix_prices_id'), table_name='prices')
    op.drop_table('prices')
    op.drop_index(op.f('ix_nomenclature_barcodes_id'), table_name='nomenclature_barcodes')
    op.drop_table('nomenclature_barcodes')
    op.drop_index(op.f('ix_module_bank_credentials_id'), table_name='module_bank_credentials')
    op.drop_table('module_bank_credentials')
    op.drop_index(op.f('ix_evotor_credentials_id'), table_name='evotor_credentials')
    op.drop_table('evotor_credentials')
    op.drop_index(op.f('ix_docs_sales_is_deleted'), table_name='docs_sales')
    op.drop_index(op.f('ix_docs_sales_id'), table_name='docs_sales')
    op.drop_index(op.f('ix_docs_sales_cashbox'), table_name='docs_sales')
    op.drop_table('docs_sales')
    op.drop_index(op.f('ix_docs_reconciliation_id'), table_name='docs_reconciliation')
    op.drop_table('docs_reconciliation')
    op.drop_index(op.f('ix_tasks_id'), table_name='tasks')
    op.drop_table('tasks')
    op.drop_index(op.f('ix_payboxes_id'), table_name='payboxes')
    op.drop_table('payboxes')
    op.drop_index(op.f('ix_nomenclature_id'), table_name='nomenclature')
    op.drop_table('nomenclature')
    op.drop_index(op.f('ix_loyality_settings_id'), table_name='loyality_settings')
    op.drop_table('loyality_settings')
    op.drop_index(op.f('ix_loyality_cards_lifetime'), table_name='loyality_cards')
    op.drop_index(op.f('ix_loyality_cards_id'), table_name='loyality_cards')
    op.drop_table('loyality_cards')
    op.drop_index(op.f('ix_integrations_to_cashbox_id'), table_name='integrations_to_cashbox')
    op.drop_table('integrations_to_cashbox')
    op.drop_index(op.f('ix_gross_profit_docs_id'), table_name='gross_profit_docs')
    op.drop_table('gross_profit_docs')
    op.drop_index(op.f('ix_fifo_settings_id'), table_name='fifo_settings')
    op.drop_table('fifo_settings')
    op.drop_index(op.f('ix_distribution_docs_id'), table_name='distribution_docs')
    op.drop_table('distribution_docs')
    op.drop_index(op.f('ix_contracts_id'), table_name='contracts')
    op.drop_table('contracts')
    op.drop_index(op.f('ix_warehouses_id'), table_name='warehouses')
    op.drop_table('warehouses')
    op.drop_index(op.f('ix_price_types_id'), table_name='price_types')
    op.drop_table('price_types')
    op.drop_index(op.f('ix_pictures_id'), table_name='pictures')
    op.drop_table('pictures')
    op.drop_index(op.f('ix_pay_accounts_balances_id'), table_name='pay_accounts_balances')
    op.drop_table('pay_accounts_balances')
    op.drop_index(op.f('ix_organizations_id'), table_name='organizations')
    op.drop_table('organizations')
    op.drop_index(op.f('ix_manufacturers_id'), table_name='manufacturers')
    op.drop_table('manufacturers')
    op.drop_index(op.f('ix_integrations_id'), table_name='integrations')
    op.drop_table('integrations')
    op.drop_index(op.f('ix_doc_generated_id'), table_name='doc_generated')
    op.drop_table('doc_generated')
    op.drop_index(op.f('ix_categories_id'), table_name='categories')
    op.drop_table('categories')
    op.drop_index(op.f('ix_amo_table_contacts_id'), table_name='amo_table_contacts')
    op.drop_table('amo_table_contacts')
    op.drop_index(op.f('ix_amo_leads_id'), table_name='amo_leads')
    op.drop_index(op.f('ix_amo_leads_amo_install_group_id'), table_name='amo_leads')
    op.drop_index(op.f('ix_amo_leads_amo_id'), table_name='amo_leads')
    op.drop_table('amo_leads')
    op.drop_index(op.f('ix_amo_events_type_id'), table_name='amo_events_type')
    op.drop_table('amo_events_type')
    op.drop_index(op.f('ix_tag_template_id'), table_name='tag_template')
    op.drop_table('tag_template')
    op.drop_index(op.f('ix_status_entity_function_id'), table_name='status_entity_function')
    op.drop_table('status_entity_function')
    op.drop_index(op.f('ix_relation_tg_cashboxes_id'), table_name='relation_tg_cashboxes')
    op.drop_table('relation_tg_cashboxes')
    op.drop_index(op.f('ix_projects_id'), table_name='projects')
    op.drop_table('projects')
    op.drop_index(op.f('ix_pay_transactions_id'), table_name='pay_transactions')
    op.drop_table('pay_transactions')
    op.drop_index(op.f('ix_pages_id'), table_name='pages')
    op.drop_table('pages')
    op.drop_index(op.f('ix_links_id'), table_name='links')
    op.drop_table('links')
    op.drop_index(op.f('ix_events_id'), table_name='events')
    op.drop_table('events')
    op.drop_index(op.f('ix_entity_to_entity_id'), table_name='entity_to_entity')
    op.drop_table('entity_to_entity')
    op.drop_index(op.f('ix_doc_template_id'), table_name='doc_template')
    op.drop_table('doc_template')
    op.drop_index(op.f('ix_contragents_id'), table_name='contragents')
    op.drop_table('contragents')
    op.drop_index(op.f('ix_cheques_id'), table_name='cheques')
    op.drop_table('cheques')
    op.drop_index(op.f('ix_articles_id'), table_name='articles')
    op.drop_table('articles')
    op.drop_index(op.f('ix_areas_id'), table_name='areas')
    op.drop_table('areas')
    op.drop_index(op.f('ix_amo_lead_statuses_id'), table_name='amo_lead_statuses')
    op.drop_table('amo_lead_statuses')
    op.drop_index(op.f('ix_amo_integrations_id'), table_name='amo_integrations')
    op.drop_table('amo_integrations')
    op.drop_index(op.f('ix_amo_install_table_cashboxes_id'), table_name='amo_install_table_cashboxes')
    op.drop_table('amo_install_table_cashboxes')
    op.drop_index(op.f('ix_amo_install_id'), table_name='amo_install')
    op.drop_table('amo_install')
    op.drop_index(op.f('ix_amo_custom_fields_comparison_id'), table_name='amo_custom_fields_comparison')
    op.drop_table('amo_custom_fields_comparison')
    op.drop_index(op.f('ix_amo_contacts_double_id'), table_name='amo_contacts_double')
    op.drop_table('amo_contacts_double')
    op.drop_index(op.f('ix_custom_fields_values_id'), table_name='custom_fields_values')
    op.drop_table('custom_fields_values')
    op.drop_index(op.f('ix_cashboxes_id'), table_name='cashboxes')
    op.drop_table('cashboxes')
    op.drop_index(op.f('ix_amo_users_id'), table_name='amo_users')
    op.drop_table('amo_users')
    op.drop_index(op.f('ix_amo_settings_id'), table_name='amo_settings')
    op.drop_table('amo_settings')
    op.drop_index(op.f('ix_amo_lead_pipelines_id'), table_name='amo_lead_pipelines')
    op.drop_table('amo_lead_pipelines')
    op.drop_index(op.f('ix_amo_contacts_id'), table_name='amo_contacts')
    op.drop_index(op.f('ix_amo_contacts_ext_id'), table_name='amo_contacts')
    op.drop_index(op.f('ix_amo_contacts_amo_install_group_id'), table_name='amo_contacts')
    op.drop_table('amo_contacts')
    op.drop_index(op.f('ix_units_id'), table_name='units')
    op.drop_table('units')
    op.drop_index(op.f('ix_type_template_id'), table_name='type_template')
    op.drop_table('type_template')
    op.drop_index(op.f('ix_tg_accounts_id'), table_name='tg_accounts')
    op.drop_table('tg_accounts')
    op.drop_index(op.f('ix_pay_tariffs_id'), table_name='pay_tariffs')
    op.drop_table('pay_tariffs')
    op.drop_index(op.f('ix_messages_id'), table_name='messages')
    op.drop_table('messages')
    op.drop_index(op.f('ix_jwt_scopes_id'), table_name='jwt_scopes')
    op.drop_table('jwt_scopes')
    op.drop_index(op.f('ix_integrations_type_id'), table_name='integrations_type')
    op.drop_table('integrations_type')
    op.drop_index(op.f('ix_installs_id'), table_name='installs')
    op.drop_table('installs')
    op.drop_index(op.f('ix_entity_type_id'), table_name='entity_type')
    op.drop_table('entity_type')
    op.drop_index(op.f('ix_entity_or_function_id'), table_name='entity_or_function')
    op.drop_table('entity_or_function')
    op.drop_index(op.f('ix_docs_sales_settings_id'), table_name='docs_sales_settings')
    op.drop_table('docs_sales_settings')
    op.drop_index(op.f('ix_custom_fields_id'), table_name='custom_fields')
    op.drop_table('custom_fields')
    op.drop_index(op.f('ix_amo_settings_load_types_id'), table_name='amo_settings_load_types')
    op.drop_table('amo_settings_load_types')
    op.drop_index(op.f('ix_amo_install_groups_id'), table_name='amo_install_groups')
    op.drop_table('amo_install_groups')
    # ### end Alembic commands ###
